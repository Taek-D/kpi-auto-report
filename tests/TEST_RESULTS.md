# 테스트 결과

## 테스트 개요

**테스트 날짜**: 2026-02-13  
**테스트 환경**: 개발 환경 (로컬 PostgreSQL + n8n)  
**테스트 범위**: SQL 쿼리, n8n 워크플로우, Slack 연동

---

## 테스트 케이스

### ✅ TC-1: SQL 쿼리 정확성

**목적**: 각 SQL 쿼리가 올바른 결과를 반환하는지 확인

| 쿼리 파일 | 예상 결과 | 실제 결과 | 상태 |
|----------|---------|---------|------|
| kpis_yesterday.sql | 어제 날짜 KPI | ⏳ 테스트 대기 | ⏳ |
| kpis_last_week.sql | 지난주 동일 요일 KPI | ⏳ 테스트 대기 | ⏳ |
| top_products.sql | 상위 3개 제품 | ⏳ 테스트 대기 | ⏳ |

### ✅ TC-2: WoW 계산 로직

**목적**: Week-over-Week 변화율이 정확히 계산되는지 확인

**테스트 데이터**:
- 어제 매출: ₩18,750,000
- 지난주 매출: ₩15,000,000
- 예상 WoW: +25.0%

**결과**: ⏳ 테스트 대기

### ✅ TC-3: 이상 탐지

**목적**: 임계값 초과 시 알림이 정상 작동하는지 확인

| 시나리오 | 조건 | 예상 결과 | 실제 결과 | 상태 |
|---------|------|----------|---------|------|
| 매출 급락 | -25% WoW | 🚨 Critical 알림 | ⏳ | ⏳ |
| 주문 수 감소 | -18% WoW | ⚠️ Warning 알림 | ⏳ | ⏳ |
| 정상 범위 | +5% WoW | 알림 없음 | ⏳ | ⏳ |

### ✅ TC-4: n8n 워크플로우 실행

**목적**: 전체 파이프라인이 정상 작동하는지 확인

**실행 단계**:
1. Cron Trigger (수동 실행)
2. PostgreSQL 쿼리 3개 실행
3. Function Node 데이터 변환
4. Slack 메시지 전송

**예상 실행 시간**: < 2분  
**실제 실행 시간**: ⏳ 테스트 대기

### ✅ TC-5: Slack 메시지 포맷

**목적**: Slack 메시지가 올바르게 포맷되는지 확인

**확인 항목**:
- [ ] 이모지 정상 표시
- [ ] 숫자 천 단위 구분 (₩18,750,000)
- [ ] 트렌드 아이콘 (↑/↓)
- [ ] 링크 클릭 가능

---

## 에러 시나리오 테스트

### ❌ TC-6: DB 연결 실패

**시나리오**: PostgreSQL 서버 다운

**예상 동작**:
1. n8n 워크플로우 에러 발생
2. 재시도 3회 (5초 간격)
3. 최종 실패 시 관리자 채널에 알림

**결과**: ⏳ 테스트 대기

### ❌ TC-7: 데이터 없음

**시나리오**: 어제 날짜에 주문 데이터 없음

**예상 동작**:
- Slack 메시지: "데이터가 없습니다"
- 에러 아님 (정상 처리)

**결과**: ⏳ 테스트 대기

---

## 성능 테스트

### ⚡ TC-8: 쿼리 실행 시간

| 쿼리 | 목표 | 실제 | 상태 |
|------|------|------|------|
| kpis_yesterday.sql | < 5초 | ⏳ | ⏳ |
| kpis_last_week.sql | < 5초 | ⏳ | ⏳ |
| top_products.sql | < 5초 | ⏳ | ⏳ |

---

## 테스트 실행 방법

### SQL 쿼리 테스트

```bash
psql YOUR_DATABASE_URL -f queries/kpis_yesterday.sql
```

### n8n 워크플로우 테스트

1. n8n UI 접속
2. 워크플로우 열기
3. "Execute Workflow" 클릭
4. 각 노드 결과 확인

---

## 결론

**전체 테스트 통과율**: ⏳ 진행 중  
**다음 단계**: 실제 데이터로 엔드투엔드 테스트 실행

---

**업데이트 날짜**: 2026-02-13
